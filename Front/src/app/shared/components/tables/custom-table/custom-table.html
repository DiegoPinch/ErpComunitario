<div class="card">
    <!-- TÃ­tulo opcional -->
    <div *ngIf="title" class="mb-4">
        <h3 class="text-xl font-semibold text-gray-800">{{title}}</h3>
    </div>

    <p-table #dt [value]="data" [columns]="columns" [tableStyle]="{ 'min-width': '50rem' }"
        styleClass="p-datatable-sm p-datatable-striped" [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5, 10, 20]"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros"
        [globalFilterFields]="globalFilterFields">

        <!-- Caption: Buscador y Filtros -->
        <ng-template pTemplate="caption">
            <div class="flex">
                <p-iconfield iconPosition="left" class="ml-auto">
                    <p-inputicon>
                        <i class="pi pi-search"></i>
                    </p-inputicon>
                    <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')"
                        placeholder="Buscar..." />
                </p-iconfield>
            </div>
        </ng-template>

        <!-- Header -->
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngIf="showIndex"
                    class="bg-gray-100 text-gray-700 font-bold uppercase text-sm border-b w-12 text-center">
                    #
                </th>
                <th *ngFor="let col of columns" class="bg-gray-100 text-gray-700 font-bold uppercase text-sm border-b">
                    {{ col.header }}
                </th>
                <th *ngIf="actions.length > 0"
                    class="bg-gray-100 text-gray-700 font-bold uppercase text-sm border-b text-center">
                    Acciones
                </th>
            </tr>
        </ng-template>

        <!-- Body -->
        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
            <tr class="hover:bg-gray-50 transition-colors">
                <td *ngIf="showIndex" class="border-b border-gray-100 p-3 text-gray-600 font-semibold text-center">
                    {{ rowIndex + 1 }}
                </td>
                <td *ngFor="let col of columns" class="border-b border-gray-100 p-3 text-gray-600">
                    <!-- Renderizado condicional -->
                    <ng-container *ngIf="col.type === 'tag'; else textTemplate">
                        <p-tag [value]="rowData[col.field]"
                            [severity]="col.tagSeverity ? col.tagSeverity(rowData[col.field]) : 'info'"></p-tag>
                    </ng-container>
                    <ng-template #textTemplate>
                        {{ rowData[col.field] ? rowData[col.field] : '-' }}
                    </ng-template>
                </td>
                <td *ngIf="actions.length > 0"
                    class="border-b border-gray-100 p-3 text-gray-600 text-center flex gap-2 justify-center">
                    <p-button *ngFor="let action of actions" [icon]="action.icon" [styleClass]="action.styleClass"
                        [rounded]="true" [text]="true" [pTooltip]="action.tooltip" tooltipPosition="top"
                        (click)="action.command(rowData)">
                    </p-button>
                </td>
            </tr>
        </ng-template>

        <!-- Empty Message -->
        <ng-template pTemplate="emptymessage">
            <tr>
                <td [attr.colspan]="columns.length" class="text-center p-4 text-gray-500">
                    No se encontraron registros.
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>